<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>REACT impove</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <link rel="stylesheet" href="https://unpkg.com/js-datepicker/dist/datepicker.min.css">
    <script src="https://unpkg.com/js-datepicker"></script>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>


    <link rel="stylesheet" href="style2.css">

    <!-- Не используйте это в production -->
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

    <!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" href="dp.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

</head>

<body>
<script>


if (!window.WebSocket) {
	document.body.innerHTML = 'WebSocket в этом браузере не поддерживается.';
}
// создать подключение
var socket = new WebSocket("ws://localhost:4567/echo");
// обработчик входящих сообщений
socket.onmessage = function(event) {
  var incomingMessage = event.data;
  addscript(incomingMessage);
  location.reload();
};
// показать сообщение в div#subscribe
function addscript(scripted){
    var script = document.createElement('script');
    script.onload = function ()
    {
        alert('dynamical loaded');
    };
    script.src = alert(scripted);;;
    document.head.appendChild(script);
}
</script>
<!--div id="loginform" class="logindiv">
    <form action="approve" >
        <h5>ID</h5><input name="id" id="inputid"> </input><br>
        <button type="submit" onclick="alert('Запрос одобрен')" >Одобрить запрос</button>
    </form>
</div-->

<script type="text/babel"  src="js/Approve.js"></script>
<script type="text/babel">

localStorage.setItem('maxitem', 0);
localStorage.setItem('minitem', 0);
</script>
<input type="text" name="daterange"  id="data00" />

<label id="picker1">Label</label><label id="picker2">Label</label><button onclick="filter()">Filter</button>
<div id="datapicker"><h5>datapicker div</h5></div>
<button onClick="clickedNew()">Emulate new</button>
<button onClick="clickedUpdate()">Emulate exist</button>
<button onClick="hideRow()">hideRow NOW</button>
<button onClick="showRow()">showRow NOW</button>
<button onClick="hideRows()">hideRows NOW</button>
<button onClick="showRows()">showRows NOW</button>
<table id="mTable" valign="center" class="table" cellpadding="10" border="10" align="center">
    <tr><th class="text-center">ID</th>
        <th class="text-center">Дата запроса</th>
        <th class="text-center">Комментарий</th>
        <th class="text-center">Позиция</th>
        <th class="text-center">Дата разрешения /запрешения</th>
        <th class="text-center">Измененная позиция</th>
        <th class="text-center">Дата изменения</th>
        <th class="text-center" >Одобрить запрос
            <select id="requestselect" onchange="filterRequest(this.value);">
                <option value="N">Не выбрано</option>
                <option value="Разрешено">Разрешено</option>
                <option value="Запрещено">Запрещено</option>
            </select>
        </th>
    </tr>
    <tbody align="right" id="tbody">
    <tr id="381"><td align="center"><div id='381a0'>381</div></td><td align="center"><div id='381a1'>2021-01-18 10:21:52.825</div></td><td align="center"><div id='381a2'>88889</div></td><td align="center"><div id='381a3'><p>Дата: 2019-09-06<br><p>Время: 10:56:49<br><p>Номер накладной: 3<br><p>Металл: Нержавейка<br><p>Тара: 1<br><p>Нетто: 9<br><p>Брутто: 10<br><p>Засор: 0<br><p>Примесь: 0<br><p>Комментарий: мехайлов<br></div></td><td><div id='381a4'></div></td><td align="center"><div id='381a5'></div></td><td><div id='381a6'></div></td><td><div id="approvetag381"></div></td><tr> <script type="text/babel">
const json__={'number':381, 'status':'SUSPENDING'}; ReactDOM.hydrate(<Approve info={json__}/>, document.getElementById('approvetag381'));         </script></tr>
    <tr id="317"><td align="center"><div id="3170">317</div></td><td align="center"><div id="3171">2021-01-12 13:59:48.627</div></td><td align="center"><div id="3172">wfwefwfewfw</div></td><td align="center"><div id="3173"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p>Металл: Алюминий хлам<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3174">2021-01-13 12:27:26.255</div></td><td align="center"><div id="3175"></div></td><td><div id="3176"></div></td><td><div id="approvetag317"><div align="center"><h5 class="approved">Разрешено</h5></div></div></td></tr><tr> </tr>
    <tr id="316"><td align="center"><div id="3160">316</div></td><td align="center"><div id="3161">2021-01-12 13:57:46.715</div></td><td align="center"><div id="3162">dfgfdgfdgfdgfdgd</div></td><td align="center"><div id="3163"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p>Металл: Алюминий хлам<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3164">2021-01-13 12:27:26.255</div></td><td align="center"><div id="3165"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p style="background-color: yellow;">Металл: Бабит 16%<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3166">2021-01-12 13:58:29.418</div></td><td><div id="approvetag316"><div align="center"><h5 class="approved">Разрешено</h5></div></div></td></tr>
    <tr id="315"><td align="center"><div id="3150">315</div></td><td align="center"><div id="3151">2021-01-11 17:58:05.767</div></td><td align="center"><div id="3152">initial</div></td><td align="center"><div id="3153"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p>Металл: Алюминий хлам<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3154">2021-01-13 12:27:26.255</div></td><td align="center"><div id="3155"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p style="background-color: yellow;">Металл: Бабит 16%<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3156">2021-01-12 13:58:29.418</div></td><td><div id="approvetag315"><div align="center"><h5 class="approved">Разрешено</h5></div></div></td></tr>
    <tr id="314"><td align="center"><div id="3140">314</div></td><td align="center"><div id="3141">2021-01-11 16:47:45.93</div></td><td align="center"><div id="3142">sdfdsdfsdsfsd</div></td><td align="center"><div id="3143"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p>Металл: Алюминий хлам<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3144">2021-01-13 12:27:26.255</div></td><td align="center"><div id="3145"><p>Дата: 2020-11-03<br></p><p>Время: 16:18:04<br></p><p>Номер накладной: 15<br></p><p style="background-color: yellow;">Металл: Бабит 16%<br></p><p>Тара: 0.0<br></p><p>Нетто: 287.60<br></p><p>Брутто: 294.5<br></p><p>Засор: 1.0<br></p><p>Примесь: 4.0<br></p><p>Комментарий: витек<br></p></div></td><td align="center"><div id="3146">2021-01-12 13:58:29.418</div></td><td><div id="approvetag314"><div align="center"><h5 class="approved">Разрешено</h5></div></div></td></tr>
    <tbody align="right">
</table>
<script type="text/babel">

var a = localStorage.getItem('minitem');
var b = localStorage.getItem('maxitem');
//alert(a+":"+b)


function hideRow(){
  var row___ = document.getElementById("317")
  row___.hidden=true;
}

function compareDate(input, dp1, dp2){
  var input__ = new Date(input)
  var dp1__ = new Date(dp1)
  var dp2__ = new Date(dp2)
  if ((input__<dp1__) || (input__>dp2__))
    return false;
  return true;
}

function filterRows(){
  var a = localStorage.getItem('minitem')
  var b = localStorage.getItem('maxitem')
  var begin__ = localStorage.getItem('begindate');
  var end__ =  localStorage.getItem('enddate');

  for (let i=b; i>=a; i--){
      let divid = String(i)+1;
      if (document.getElementById(divid) == null)
        continue;
      let elem = document.getElementById(divid).innerHTML;
      var curDate = elem.substring(0,10);
      if (!compareDate(curDate, begin__, end__ ))
        document.getElementById(i).hidden=true;
      else document.getElementById(i).hidden=false;
  }

}



function filterRequest(value) {
  let startItem = localStorage.getItem('minitem');
  let endItem = localStorage.getItem('maxitem');

  for (let i = endItem; i >= startItem; i--) {
    let divid = "approvetag" + String(i);

    if (document.getElementById(divid) == null)
        continue;

    let elem = document.getElementById(divid).firstChild.firstChild.innerHTML;

    if (value == "N")
        document.getElementById(i).hidden=false;
        else if (elem != value)
                document.getElementById(i).hidden=true;
                else document.getElementById(i).hidden=false;

  }
}


function showRows(){
  var row___ = document.getElementById("317")
  row___.hidden=false;
}

function showRow(){
  var row___ = document.getElementById("317")
  row___.hidden=false;
}


$(function() {
  $('input[name="daterange"]').daterangepicker({
    opens: 'left',
    "autoApply": true,
 "locale": {
        "format": "YYYY/MM/DD",
        "separator": " - ",
        "applyLabel": "Применить",
        "cancelLabel": "Отменить",
        "fromLabel": "От",
        "toLabel": "Дo",
        "customRangeLabel": "Произвольно",
        "weekLabel": "Н",
        "daysOfWeek": [
            "Вс",
            "Пн",
            "Вт",
            "Ср",
            "Чт",
            "Пт",
            "Сб"
        ],
        "monthNames": [
            "Январь",
            "Февраль",
            "Март",
            "Апрель",
            "Май",
            "Июнь",
            "Июль",
            "Август",
            "Сентябрь",
            "Октябрь",
            "Ноябрь",
            "Декабрь"
        ],
        "firstDay": 1
    },
    "startDate" : moment().startOf('day').add(-14, 'day'),
    "endDate" : moment()
  }, function(start, end, label) {
    console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
    localStorage.setItem('begindate', start.format('YYYY-MM-DD'))
    localStorage.setItem('enddate', end.format('YYYY-MM-DD'))
    filterRows()
  });
});


    const json__ =   [{"datetimeupdate":"'null'","initialdata":"'{\"Date\": \"2020-11-03\", \"Mode\": \"Приемка\", \"Tara\": \"0.0\", \"Time\": \"16:18:04\", \"Netto\": \"287.60\", \"Trash\": \"4.0\", \"Brutto\": \"294.5\", \"Metall\": \"Алюминий хлам\", \"Comment\": \"витек\", \"Clogging\": \"1.0\", \"Complete\": \"Да\", \"Condition\": \"Выгружен\", \"Waybill_number\": \"15\"}'","updateddata":"'null'","datetimerequest":"'2021-01-12 13:59:48.627'","comment":"wfwefwfewfw","id":318,"datetimeapprove":"'null'"}];
  //  alert('mount datapicker')
    var datapickerdiv = document.getElementById('datapicker');
//    const picker = datepicker('#picker2')
//    picker.toggleOverlay()

    const start = datepicker('#picker1', { id: 1 })
    const end = datepicker('#picker2', { id: 1 })
    function filter(){
      let obj____ = start.getRange
      alert('filter'+JSON.stringify(obj____))
    }
    const simple__ = [{'id':13}, {'id':14}]
    const declined__ = [{"datetimeupdate":"'null'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий электротех", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-21 15:40:17.2'","comment":"5464565464","id":274,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'null'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий электротех", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-21 15:43:22.949'","comment":"hdfdhdxhfdxhdfxh","id":276,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'2020-12-18 15:30:10.563'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "3.0", "Time": "13:56:33", "Netto": "203.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "12А", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-15 15:25:49.042'","comment":"vdsvsdvdsvsv","id":169,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'2020-12-18 15:30:10.563'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий электротех", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-18 15:29:53.097'","comment":"879797898778998797","id":249,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'null'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий пищевой", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-21 15:37:36.278'","comment":"ers54waetg","id":317,"datetimeapprove":"'2020-12-21 15:43:27.324'"}]
    const exist__ = [{"datetimeupdate":"'null'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий электротех", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-21 15:40:17.2'","comment":"5464565464","id":274,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'null'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий электротех", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-21 15:43:22.949'","comment":"hdfdhdxhfdxhdfxh","id":276,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'2020-12-18 15:30:10.563'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "3.0", "Time": "13:56:33", "Netto": "203.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "12А", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-15 15:25:49.042'","comment":"vdsvsdvdsvsv","id":169,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'2020-12-18 15:30:10.563'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий электротех", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-18 15:29:53.097'","comment":"879797898778998797","id":249,"datetimeapprove":"'2020-12-21 15:43:27.324'"},{"datetimeupdate":"'null'","initialdata":{"Date": "2020-12-15", "Mode": "Приемка", "Tara": "0.0", "Time": "13:56:33", "Netto": "206.70", "Trash": "0.0", "Brutto": "206.7", "Metall": "Алюминий пищевой", "Comment": "ошщ", "Clogging": "0.0", "Complete": "Нет", "Condition": "Не выгружен", "Waybill_number": "4"},"updateddata":{"a": "0"},"datetimerequest":"'2020-12-21 15:37:36.278'","comment":"ers54waetg","id":317,"datetimeapprove":"'2020-12-21 15:43:27.324'"}]
    const with__updated____ = [{"datetimeupdate":"'2021-01-12 13:58:29.418'","initialdata":{"Date": "2020-11-03", "Mode": "Приемка", "Tara": "0.0", "Time": "16:18:04", "Netto": "287.60", "Trash": "4.0", "Brutto": "294.5", "Metall": "Алюминий хлам", "Comment": "витек", "Clogging": "1.0", "Complete": "Да", "Condition": "Выгружен", "Waybill_number": "15"},"updateddata":{"Date": "2020-11-03", "Mode": "Приемка", "Tara": "0.0", "Time": "16:18:04", "Netto": "287.60", "Trash": "4.0", "Brutto": "294.5", "Metall": "Бабит 16%", "Comment": "витек", "Clogging": "1.0", "Complete": "Да", "Condition": "Выгружен", "Waybill_number": "15"},"datetimerequest":"'2021-01-12 13:57:46.715'","comment":"dfgfdgfdgfdgfdgd","id":316,"datetimeapprove":"'2021-01-13 12:27:26.255'"}]

    const new_withupdated  =  [{"datetimeupdate":"'2021-01-12 13:58:29.418'","initialdata":{"Date": "2020-11-03", "Mode": "Приемка", "Tara": "0.0", "Time": "16:18:04", "Netto": "287.60", "Trash": "4.0", "Brutto": "294.5", "Metall": "Алюминий хлам", "Comment": "витек", "Clogging": "1.0", "Complete": "Да", "Condition": "Выгружен", "Waybill_number": "15"},"updateddata":{"Date": "2020-11-03", "Mode": "Приемка", "Tara": "0.0", "Time": "16:18:04", "Netto": "287.60", "Trash": "4.0", "Brutto": "294.5", "Metall": "Бабит 16%", "Comment": "витек", "Clogging": "1.0", "Complete": "Да", "Condition": "Выгружен", "Waybill_number": "15"},"datetimerequest":"'2021-01-12 13:57:46.715'","comment":"dfgfdgfdgfdgfdgd","id":500,"datetimeapprove":"'2021-01-13 12:27:26.255'"}]

    const extracted__ = {"Date":"2020-12-15","Mode":"Приемка","Tara":"0.0","Time":"13:56:33","Netto":"206.70","Trash":"0.0","Brutto":"206.7","Metall":"Алюминий пищевой","Comment":"ошщ","Clogging":"0.0","Complete":"Нет","Condition":"Не выгружен","Waybill_number":"4"}
 ///   alert('extracted=>'+extracted__.Date)
    localStorage.setItem('maxitem', 317);

    var obj_____ = declined__[0].initialdata.Date;
   // alert('obj==>'+obj_____)
    var declined_obj_updateddata = declined__[0].updateddata
  //  alert('length=>'+JSON.stringify(declined_obj_updateddata).length)

    function proccessJSON(q){
        let maxitem = localStorage.getItem('maxitem');
   //     alert(maxitem)
        for (var item in q)
            var id  = (q[item].id);
          ////  //if (maxitem<id)
                createRow(q[item])
           ///// else
           ///////     updateRow(q[item])
    }

    function createRow(a){
        var counter = String(a.id)
   ///     alert('counter'+counter)
    ////    alert(document.getElementById(counter))
        if (document.getElementById(counter)==null)
        {

            var table = document.getElementById("mTable");
            var row = table.insertRow(1);
            var tbdy = document.getElementById('tbody');
            var tr = document.createElement('tr');
            tr.setAttribute("id", counter);
            for (var j = 0; j < 7; j++)
            {
                var td = document.createElement('td');
                td.setAttribute("align", "center");
                var div = document.createElement("div");
                var id = counter+'a'+j
                console.log(id)
                div.setAttribute("id", id);
                td.appendChild(div)
                tr.appendChild(td)
            }
            var td = document.createElement('td');
            var div = document.createElement("div");
            var id = 'approvetag'+counter
            div.setAttribute("id", id);
            td.setAttribute("align", "center");
            td.appendChild(div)
            tr.appendChild(td)
            tbdy.prepend(tr);
        }
        var id = 'approvetag'+counter
        var status___ = processRow(a)
        const json__ = {'number': a.id, 'status': status___};
        ReactDOM.render(<Approve info={json__}/>, document.getElementById(id));

    }

    function flow(a222)
    {

        if (a222 == "'null'")
            return '';
        if ((a222[0]=="'") && (a222[a222.length-1]=="'"))
        return a222.substring(1, a222.length-1)
        return a222;
    }

    function schoneJSON(input){
        if (input==null)
            return "";
        if (input.a ==0)
            return '';
        var result="";
        result+="<p>Дата: "+ input.Date +   "<br>";
        result+="<p>Время: "+ input.Time +   "<br>";
        result+="<p>Номер накладной: "+ input.Waybill_number +    "<br>";
        result+="<p>Металл: "+ input.Metall +    "<br>";
        result+="<p>Тара: "+ input.Tara +    "<br>";
        result+="<p>Нетто: "+ input.Netto +   "<br>";
        result+="<p>Брутто: "+ input.Brutto +   "<br>";
        result+="<p>Засор: "+ input.Clogging +   "<br>";
        result+="<p>Примесь: "+ input.Trash +   "<br>";
        result+="<p>Комментарий: "+ input.Comment +   "<br>";
        return result
    }

    function compareundschoneJSON(input, compare, rownumber)
    {

        if ((input==null) || (compare==null) ||  (input.a ==0) ){
            return schoneJSON(input);
        }
        var div = document.getElementById(String(rownumber)+'a'+5);
        div.innerHTML = "";

        var p1 = document.createElement("p");
        p1.innerHTML = 'Дата: '+input.Date
        if (input.Date != compare.Date)
            p1.setAttribute("style", 'background-color: yellow');
        div.appendChild(p1);

        var p2 = document.createElement("p");
        p2.innerHTML = 'Время: '+input.Time
        if (input.Time != compare.Time)
            p2.setAttribute("style", 'background-color: yellow');
        div.appendChild(p2);

        var p3 = document.createElement("p");
        p3.innerHTML = 'Номер накладной: '+input.Waybill_number
        if (input.Waybill_number != compare.Waybill_number)
            p3.setAttribute("style", 'background-color: yellow');
        div.appendChild(p3);

        var p4 = document.createElement("p");
        p4.innerHTML = 'Металл: '+input.Metall
        if (input.Metall != compare.Metall)
            p4.setAttribute("style", 'background-color: yellow');
        div.appendChild(p4);

        var p5 = document.createElement("p");
        p5.innerHTML = 'Тара: '+input.Tara
        if (input.Tara != compare.Tara)
            p5.setAttribute("style", 'background-color: yellow');
        div.appendChild(p5);

        var p6 = document.createElement("p");
        p6.innerHTML = 'Нетто: '+input.Netto
        if (input.Netto != compare.Netto)
            p6.setAttribute("style", 'background-color: yellow');
        div.appendChild(p6);

        var p7 = document.createElement("p");
        p7.innerHTML = 'Брутто: '+input.Brutto
        if (input.Brutto != compare.Brutto)
            p7.setAttribute("style", 'background-color: yellow');
        div.appendChild(p7);

        var p8 = document.createElement("p");
        p8.innerHTML = 'Засор: '+input.Clogging
        if (input.Clogging != compare.Clogging)
            p8.setAttribute("style", 'background-color: yellow');
        div.appendChild(p8);

        var p9 = document.createElement("p");
        p9.innerHTML = 'Примесь: '+input.Trash
        if (input.Trash != compare.Trash)
            p9.setAttribute("style", 'background-color: yellow');
        div.appendChild(p9);

        var p10 = document.createElement("p");
        p10.innerHTML = 'Комментарий: '+input.Comment
        if (input.Comment != compare.Comment)
            p10.setAttribute("style", 'background-color: yellow');
        div.appendChild(p10);
    }
    function fillRow(a)
    {
       let index____ = String(a.id)
       var id = document.getElementById(index____+'a'+0);
       var datetimerequest = document.getElementById(index____+'a'+1);
       var comment = document.getElementById(index____+'a'+2);
       var initialdata = document.getElementById(index____+'a'+3);
       var datetimeapprove = document.getElementById(index____+'a'+4);
       var updateddata = document.getElementById(index____+'a'+5);
       var datetimeupdate = document.getElementById(index____+'a'+6);
       id.innerHTML =''
       datetimerequest.innerHTML =''
       comment.innerHTML =''
       initialdata.innerHTML=''
       datetimeapprove.innerHTML=''
       updateddata.innerHTML = ''
       datetimeupdate.innerHTML =''
       id.innerHTML =flow( a.id)
       datetimerequest.innerHTML =flow( a.datetimerequest)
       comment.innerHTML =flow( a.comment)
       initialdata.innerHTML = schoneJSON(flow(a.initialdata))
       datetimeapprove.innerHTML =flow( a.datetimeapprove)
       compareundschoneJSON(flow(a.updateddata), flow(a.initialdata), a.id)
       datetimeupdate.innerHTML =flow( a.datetimeupdate)
    }

    function processRow(a22)
    {
        fillRow(a22)
        if (JSON.stringify(a22.updateddata).length==9)
            return 'DECLINED'
        if (JSON.stringify(a22.updateddata).length>9)
            return 'APPROVED'
        return 'SUSPENDING'

    };


    function updateRow(a){
        alert('update row')
    }
       ///updateddata.innerHTML=

    function clickedNew(){
    //    alert('there works')
    //    proccessJSON(declined__)
    new_withUpdate()
    }

    function clickedUpdate(){
        alert('there works')
        proccessJSON(with__updated____)
        proccessJSON(declined__)
    }

    function new_withUpdate(){
      proccessJSON(new_withupdated)
    }
    let str2 = "'7878778'"
  ///  alert(str2)
  ///  alert(flow("'7878778'"))

//    new_withUpdate()
localStorage.setItem('begindate', moment().startOf('day').add(-14, 'day'))
localStorage.setItem('enddate', moment())
  filterRows()
</script>
</body>
</html>
