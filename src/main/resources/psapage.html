<!DOCTYPE html>
<html lang="en" xmlns:width="http://www.w3.org/1999/xhtml">
<head>

        <meta charset="UTF-8">
        <title>Таблица запросов 3.0X</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="style2.css">
        <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
        <script src="https://use.fontawesome.com/a0f7b43176.js"></script>


        <!-- Не используйте это в production -->
        <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

        <!-- jQuery and JS bundle w/ Popper.js -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
        <link rel="stylesheet" href="dp.css">

</head>
<body>
<h1 align="center">Установка контрагента для ПСА $psanumber</h1>
<div id="main">

</div>
<div class="outer">
<div class="middle">
<div class="inner">
            <h3> Введите ИНН или Номер паспорта</h3>
            <input align="center" id="googlesearch" onkeyup="search()" class="searchclient2">
            <div id="client"></div>
            <button id="confirm" type="button" class="btn btn-success" onclick="apply()" л><i class="fa fa-hand-pointer-o" aria-hidden="true"></i>
                Установить контрагента</button><
</div>
</div>
</div>




    <script>
   let initial = $initial
   alert(initial)
   let name =""
   let confirm = document.getElementById("confirm")
   confirm.style.visibility = 'hidden'

   function update()

    function search(){
        function getXmlHttp()
        {
            var xmlhttp;
            try {
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e)
            {
                try
                {
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (E)
                {
                    xmlhttp = false;
                }
            }
            if (!xmlhttp && typeof XMLHttpRequest!='undefined')
            {
                xmlhttp = new XMLHttpRequest();
            }
            return xmlhttp;
        }

        var xhr = getXmlHttp()
        var request = "/psaproc?input="+googlesearch.value;
        console.log('sending  ' +googlesearch.value)
        xhr.open("GET", request, true);
        xhr.onreadystatechange=function()
        {
            if (xhr.readyState != 4) return
            clearTimeout(xhrTimeout)
            if (xhr.status == 200) {
                let elem = document.getElementById("client")
                name = xhr.responseText
                elem.innerHTML = "<h3>"+name.replaceAll("#"," ")+"</h3>"
                if (xhr.responseText !="")
                    confirm.style.visibility = 'visible'
                else
                    confirm.style.visibility = 'hidden'

                console.log("responce::   "+xhr.responseText)
               //// alert('ответ отправлен');
  /////////////              location.reload();
            }
            if (xhr.status == 500) {
           //////     alert('ответ отправлен');
 ////////////               location.reload();
            }
        }

        xhr.send("a=5&b=4");
        var xhrTimeout = setTimeout( function(){ xhr.abort(); handleError("Timeout") }, 10000);

        function handleError(message)
        {
            alert("Ошибка: "+message)
        }

      }
      search()
function apply(){
    alert('success')
}
</script>
</body>
</html>